<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>

<body>
  <div id="data"></div>
   <div id="data1"></div>
  <script>
   

   //ajax-get
// var xhr = new XMLHttpRequest();
// xhr.open("get","http://localhost:3000/users");
// xhr.send(null);
// xhr.onreadystatechange = function(){
// if(xhr.status == 200 && xhr.readyState == 4)
//   { 
//     console.log(JSON.parse(xhr.responseText));
//     console.log(typeof(JSON.parse(xhr.responseText)));
//  document.getElementById("data").innerHTML = xhr.responseText
 
//  }
//  }

   //ajax-get封装  callback 方式的 API
 function get(url, callback) {
var xhr = new XMLHttpRequest();
xhr.onload = function () {
callback(xhr.responseText)
 }
 xhr.open("get",url,true);
xhr.send(null);
 }
get('http://localhost:3000/users', function (data) {
      console.log(JSON.parse(data))
      console.log(typeof(JSON.parse(data)))
      document.getElementById("data").innerHTML = data

get('http://localhost:3000/jobs', function (data) {

 console.log(JSON.parse(data))
      console.log(typeof(JSON.parse(data)))
      document.getElementById("data1").innerHTML = data
    })

  })
//ajax-get封装  promise 方式的 API
 //    function pGet(url, callback) {
 //      return new Promise(function (resolve, reject) {
 //        var oReq = new XMLHttpRequest()
 //        // 当请求加载成功之后要调用指定的函数
 //        oReq.onload = function () {
 //          // 我现在需要得到这里的 oReq.responseText
 //          callback && callback(JSON.parse(oReq.responseText))
 //          resolve(JSON.parse(oReq.responseText))
 //        }
 //        oReq.onerror = function (err) {
 //          reject(err)
 //        }
 //        oReq.open("get", url, true)
 //        oReq.send()
 //      })
 //    }


 //    pGet('http://localhost:3000/users')
 //      .then(function (data) {
 //        console.log(data)
 //         console.log(typeof(data))       
 //        document.getElementById("data").innerHTML = JSON.stringify(data)
 //        return pGet('http://localhost:3000/jobs')
 //      }).then(function(data){

 // console.log(data)
 //         console.log(typeof(data))       
 //        document.getElementById("data1").innerHTML = JSON.stringify(data)

 //      })






//ajax-post
// var xhr = new XMLHttpRequest();
// xhr.open("post","validate.php");
// xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
// xhr.send("username="+name);
// xhr.onreadystatechange = function(){
// // 判断服务器是否响应，判断异步对象的响应状态
// if(xhr.status == 200 && xhr.readyState == 4){
//  document.querySelector(".showmsg").innerHTML = xhr.responseText;
//  }
//  }

  </script>
</body>

</html>
